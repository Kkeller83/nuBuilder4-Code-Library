<script type="text/javascript">

function showMessage(id, msg) {

    $('#' + id).html(msg)
        .fadeTo(2000, 500).slideUp(500, function() {
            $(this).html('');
        });

}

$(document).ready(function(e) {

    $('#fileToUpload').on('change', function(event) {

        var file = $(this)[0].files[0];

        var formdata = new FormData();
        formdata.append('file', file);
        formdata.append('record_id', nuCurrentProperties().record_id);

        showMessage('sample_msg','<div class="alert alert-info"><i class="fa fa-spin fa-spinner"></i>Uploading...</div>');

        $.ajax({
            type: "POST",
            url: "libs/upload/upload.php",
            data: formdata,
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) {
                if (data == 'invalid') {
                    showMessage('sample_msg','<div class="alert alert-info"><i class="fa fa-exclamation-triangle"></i> Extension invalid. Try with <strong>Pdf, docx</strong>.</div>');
                } else {
                    
                    var result = JSON.parse(data);
                    $('#' + fileNameRowId).val(result.file_name).change();
		    $('#' + fileIdRowId).val(result.file_id).change();		            
 		    createDownloadLink(fileNameRowId, uploadFolder, result.file_id, result.file_name);
					
                    showMessage('sample_msg','<div class="alert alert-success"><i class="fa fa-thumbs-up"></i> Data updated successfully.</div>');
                }
                $("#upload-form")[0].reset();

            },
            error: function(data) {
                showMessage('sample_msg','<div class="alert alert-danger"><i class="fa fa-exclamation-triangle"></i>Upload failed.</div>');
            }
        });
	});	
});		
</script>

<form id="upload-form" action="libs/upload/upload.php" method="post" enctype="multipart/form-data">   
    <input type="file" name="fileToUpload" id="fileToUpload">
    <input type="submit" name="submit" value="Upload">
</form>
